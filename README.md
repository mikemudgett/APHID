# APHID
### _Arabidopsis_ Precise Homology-directed Insertion Designer

APHID is a tool that allows you to automatically design precise insertions in _Arabidopsis thaliana_ using the system described in (to be published soon).

The main purpose of APHID is to eliminate the tedious work of downloading genetic sequence and searching for guides, counting nucleotides, and manually picking out primers to make your construct. All you need to do is provide the transcript ID you are interested in, the desired insertion site, and the intended cargo sequence and APHID will output all the primers you need to order as well as reference genomic and plasmid sequences.
***
### **GETTING STARTED**

First: If you are not comfortable with using Python scripts, the tool is available for in-browser use on Google Colab: APHID Online.
Follow the steps block-by-block to prepare the required files and run the tool.

If you would like to run APHID locally, download the three scripts APHID.py, aphid_utils.py, and aphid_prep.py.

#### _File Descriptions_

APHID.py: The main script for running the APHID tool to design inseritons once setup is complete.
aphid_utils.py: File containing repeatedly-used functions in AHPID.
aphid_prep.py: Script for creating necessary files to run APHID. Allows for customization of PAM sequence and guide length.

#### _Dependencies_

&mdash; Biopython  
&mdash; Numpy  
&mdash; Pandas  
&mdash; Primer3-py  
&mdash; Regex  
&mdash; Python-docx

***
### **USING APHID**

#### _Prep_
After downloading files and installing dependencies, run aphid_prep.py and specify parameters in the following format:  
`python aphid_prep.py {PAM sequence} {Guide length}`

Example:  
`python aphid_prep.py NGG 20`

These are the parameters for standard SpCas9. The recognized PAM sequence is NGG and guides are 20nt long.  
ahpid_prep.py will download the _Arabidopsis thaliana_ genome and pull out all possible guides based on your specifications. This allows us to easily check for guide specificity. It also builds a BLAST database of the genome, to speed up primer design. If any of the files this steps generates are already in your local folder, they will not be re-generated.

#### _Design_
With the required genome and guide files in your database, run the script APHID.py to design your insertion:  
`python APHID.py {Transcript ID} {Insertion Site} {Cargo File} {Project Name}`

Example:  
`python APHID.py AT3G02260.1 2342 GFP.fa BIG_GFP`

**_Notes_**  
* <ins>Transcript ID</ins> (AT3G02260.1) is used instead of Gene ID (AT3G02260) because different splice variants may have different amino acid sequences. Check which transcript you want to use as a reference.
* <ins>Insertion Site</ins> refers to the **amino acid** number **after** which you want to insert your cargo. Therefore, "1" means the cargo will be inserted after the start codon, and 2342 means the cargo will be inserted after amino acid #2342. To make things simple, "-1" automatically sets the insertion site as at the end of the coding sequence, right before the stop codon.
* <ins>Cargo File</ins> should be a file in FASTA format with only one entry, the sequence of your desired cargo. Make sure it does not contain any unintended stop codons.
* <ins>Project Name</ins> is just a name for the project and will be used as a prefix for all output files.

**_Outputs_**  
APHID outputs three files:
* <ins>Design document</ins> (Project_Name_design.docx): A word document containing the command used to generate it and the genomic sequence surrounding the insertion site. The insertion is shown in green text. Primers are highlighted and also listed below the sequence. Statistics including homology arm lengths are also included. This document is useful for visualizing the planned insertion and for aligning sequencing results from candidate plants.
* <ins>Primer list</ins> (Project_Name_primers.csv): A CSV file listing all primers generated by APHID. It can be opened in excel so that primers can easily be copied and entered into the desired ordering system.
* <ins>Plasmid map</ins> (Project_Name_plasmid.fa): A FASTA file containing the sequence of the final insertion construct. Useful for aligning sequencing results to verify that your plasmid is correct. Note that this file is based on the pHEE-mCherry vector (Addgene link will go here) as described in (publication link here). If you are making your construct using a different vector or protocol, this file will have limited use (as will the primers).

Refer to the "Example" Folder for an example of output.

**_Cloning_**  
Once you have designed your construct, you can move on to cloning your plasmid and transforming your plants. Follow the protocol outlined in (the publication) or use the more detailed protocol found in the "Cloning Protocol" Directory.
